<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <!-- Actions -->
  <record id="action_legal_case" model="ir.actions.act_window">
    <field name="name">Cases</field>
    <field name="res_model">legal.case</field>
    <field name="view_mode">kanban,tree,form</field>
    <field name="help" type="html">
      <p class="o_view_nocontent_smiling_face">
        Manage legal cases, hearings and invoices.
      </p>
    </field>
  </record>

  <!-- Tree view -->
  <record id="view_legal_case_tree" model="ir.ui.view">
    <field name="name">legal.case.tree</field>
    <field name="model">legal.case</field>
    <field name="arch" type="xml">
      <tree string="Legal Cases">
        <field name="name"/>
        <field name="client_id"/>
        <field name="responsible_lawyer_id"/>
        <field name="case_type"/>
        <field name="stage"/>
        <field name="fixed_fee_amount"/>
        <field name="open_date"/>
        <field name="close_date"/>
        <field name="hearing_count"/>
        <field name="invoice_count"/>
      </tree>
    </field>
  </record>

  <!-- Form view -->
  <record id="view_legal_case_form" model="ir.ui.view">
    <field name="name">legal.case.form</field>
    <field name="model">legal.case</field>
    <field name="arch" type="xml">
      <form string="Legal Case" version="14.0">
        <header>
          <field name="name" readonly="1"/>
          <field name="stage" widget="statusbar" statusbar_visible="intake,active,closed"/>
          <button name="action_create_invoice" type="object" string="Create Invoice" class="btn-primary" attrs="{'invisible':[('fixed_fee_amount','=',0)]}"/>
          <button name="action_view_invoices" type="object" string="Invoices"/>
        </header>
        <sheet>
          <div class="oe_button_box" name="button_box">
            <button name="action_open_hearings" type="object" class="oe_stat_button">
              <field name="hearing_count" widget="statinfo"/>
              <div>Hearings</div>
            </button>
            <button name="action_view_invoices" type="object" class="oe_stat_button">
              <field name="invoice_count" widget="statinfo"/>
              <div>Invoices</div>
            </button>
          </div>

          <notebook>
            <page string="Overview">
              <group>
                <group>
                  <field name="client_id"/>
                  <field name="responsible_lawyer_id"/>
                  <field name="member_ids" widget="many2many_tags"/>
                </group>
                <group>
                  <field name="case_type"/>
                  <field name="stage"/>
                  <field name="fixed_fee_amount"/>
                </group>
              </group>
              <group>
                <field name="description"/>
              </group>
            </page>
            <page string="Hearings">
              <field name="hearing_ids">
                <tree editable="bottom">
                  <field name="name"/>
                  <field name="date_start"/>
                  <field name="date_end"/>
                  <field name="status"/>
                  <field name="location"/>
                </tree>
              </field>
            </page>
            <page string="Chatter">
              <field name="message_follower_ids" widget="mail_followers"/>
              <field name="message_ids" widget="mail_thread"/>
            </page>
          </notebook>
        </sheet>
      </form>
    </field>
  </record>

  <!-- Search view -->
  <record id="view_legal_case_search" model="ir.ui.view">
    <field name="name">legal.case.search</field>
    <field name="model">legal.case</field>
    <field name="arch" type="xml">
      <search>
        <field name="name"/>
        <field name="client_id"/>
        <field name="responsible_lawyer_id"/>
        <field name="case_type"/>
        <filter string="Active" domain="[('stage','=','active')]"/>
        <filter string="Closed" domain="[('stage','=','closed')]"/>
      </search>
    </field>
  </record>

</odoo>
